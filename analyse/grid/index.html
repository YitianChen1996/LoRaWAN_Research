<!DOCTYPE html>
<html>
<head>
    <style>
        #map {
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="map"></div>
<!--<iframe id="map" src="https://www.google.com/maps/d/embed?mid=1HoxMHjwKRXJGBdOjQV7ENJsabA4" width="925" height="480"></iframe>-->
<script src="d3.js" charset="utf-8"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry"></script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSsBRWnkNuDQQ-ialREvElQX0UnpRKjLM&callback=initMap">
</script>

<script>
    baseStation = new google.maps.LatLng({lat: 42.087721, lng: -75.968451});

    function initMap() {
        var i, j;

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 17,
            center: {lat: 42.087721, lng: -75.968451}, //doesn't matter;
            mapTypeId: 'terrain'
        });

        var kmlLayerRoutes = new google.maps.KmlLayer({
            url: 'https://www.google.com/maps/d/u/0/kml?mid=1HoxMHjwKRXJGBdOjQV7ENJsabA4&lid=zjt3JIYZIbkc.khpp0PRpcVvc&nl=1&forcekml=1',
            map: map
        });
        var kmlLayerStops = new google.maps.KmlLayer({
            url: 'https://www.google.com/maps/d/u/0/kml?mid=1HoxMHjwKRXJGBdOjQV7ENJsabA4&lid=zjt3JIYZIbkc.k6pZtCaFIBhI&forcekml=1',
            map: map
        });

        // var latDiv = [42.084444, 42.086444, 42.088444, 42.090444];
        // var lngDiv = [-75.965282, -75.968282, -75.971282, -75.974282, -75.977282];
        var loseRate = [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00625,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0.0480769,0.219178,0.0296296,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.0645161,0.0535714,0.0514286,0.0343137,0.0319149,0.048048,0.0362205,0.147368,0.216495,0.0547264,0.0617284,0.571429,0.0431373,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.070568,0.666667,1,1,0.333333,0.153846,0.125,0.0510949,0.00970874,0,0,1,0.0746269,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.09,0.823529,1,1,0,0,0.166667,0.333333,0,0,0,0,0.0366972,0.0340909,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.166667,0.153226,1,1,0.5,0,0,0,0,0,0,0,0,0.0119284,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.272727,0.0860215,0.0757576,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.4375,1,0.0541872,0,1,0,0,0,0,0,0,0,0,0,0.0162602,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0167464,0.105882,0.866667,0.20098,0.1,0,0,0,0,0,0,0,0,0,0,0,0.0382166,0.8,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.125,1,0.421053,0.253968,0,0,0,0,0,0,0,0,0,0,0,0,0.0232558,0.0864198,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.333333,0.571429,0.125828,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0613497,0.097166,0.0108401,0.010989,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,0.19469,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0571429,0.0434783,0,1,0.111111,0.0390244,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.2,1,0.393939,0.0292398,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0.558824,0.0578035,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0206379,0.0325581,0.00442478,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0.246032,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0286885,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0.134615,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.027027,1,1,0.0217391,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0.0268657,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0406977,0,0.00941176,0.00831947,0.0769231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00225989,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0844156,0,0,1,0.076087,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0285714,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0314136,0,0,0,0,0.0529248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0.0860215,0,0,0,0,0,0.0383387,0.333333,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00740741,0,0,0,0,0],[0,0,0,0.0208333,0.0625,0,0,0,0,0,0,0.0572917,0.0269058,1,0,0,0,0,0.00940439,0.00787402,0.05,0,0,0,0,0,0,0,0,0,0.00338983,0.0109091,0,0,0,0,0,0],[0,0,0,0.0775148,0.0687023,0.0740741,0,0,0,0,0,0.0841121,0.017094,0.5,0,0,0,0,0,0.0833333,0.00431034,0,0,0,0.0454545,0,0.454545,0.183673,0.0379747,0.00892857,0,0,0,0,0,0,0,0],[0,0,0,0.01,0.251852,0.0927152,0,0,0,0,0,0.0517241,0,0.0632911,0,0,0,0,0,0,0,0,0,0,0.00324197,0.0509554,0.0594406,0.0130435,0.0416667,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0.160959,0.428571,0,0,0,0,0.0136054,0,0.140496,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.382979,0.0836502,1,0,0,0,0.00920245,0,0.0983607,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.5,0.166667,0.666667,0,1,0,0.159091,0,0.078125,0.282609,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0.147059,0.15102,1,1,0,0.125,0.0909091,0,0.10828,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0.149701,0.730769,1,0,0.157895,0.0647059,0,0.0555556,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0.0227273,0.0884615,0.954545,1,1,0.0740741,1,0,0.10687,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0.0280374,0.161017,1,1,0.115044,1,1,0.013245,0.1875,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0.019802,0.134454,0.777778,0.103321,0.583333,0.02,0.0351562,0.0517241,0.666667,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0.0315789,0.0973451,0.0415879,0.0533333,0,1,0.158879,0.192308,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0.130208,0.155172,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0.0897959,0.0970266,0.0421053,0.0353982,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.5,0.108939,0.357143,0.228758,0.0155642,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.5,0.0821918,0.297872,0.0333333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];
        var leftUpperLat = 42.092444;
        var leftUpperLng = -75.980282;

        var lngDiv = [-75.965282, -75.966282, -75.967282, -75.968282];
        var latDiv = [42.082444, 42.082944, 42.083444, 42.083944, 42.084444];
        var line = [];

        for (i = 0; i <= 39; i++) {
            var north = leftUpperLat - 0.00025 * i;
            var south = leftUpperLat - 0.00025 * (i + 1);
            for (j = 0; j <= 37; j++) {
                var west = leftUpperLng + 0.0005 * j;
                var east = leftUpperLng + (0.0005) * (j + 1);
                var rectangle = new google.maps.Rectangle({
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 1,
                    fillColor: '#FF0000',
                    fillOpacity: loseRate[i][j],
                    map: map,
                    bounds: {
                        north: north,
                        south: south,
                        east: east,
                        west: west
                    }
                });

            }
        }

        // oristr = "42.0859 -75.9766 42.087 -75.9779 42.0857 -75.9766 42.0866 -75.9775 42.0848 -75.9754 42.0845 -75.9737 42.0849 -75.9755 42.0845 -75.9737 42.0849 -75.9755 42.0845 -75.974 42.0848 -75.9753 42.0845 -75.9737 42.085 -75.9756 42.0845 -75.9743 ";
        // arr = [];
        //
        // arr = oristr.split(' ');
        //
        // for (i = 0; i <= (arr.length / 2) - 1; i++) {
        //     var latLng = new google.maps.LatLng(arr[i * 2], arr[i * 2 + 1]);
        //     var marker = new google.maps.Marker({
        //         position: latLng,
        //         map: map
        //     });
        // }

        var outerRetangle = [
            {lat: 42.092444, lng: -75.980282},
            {lat: 42.092444, lng: -75.962282},
            {lat: 42.082444, lng: -75.962282},
            {lat: 42.082444, lng: -75.980282},
            {lat: 42.092444, lng: -75.980282}
        ];
        var outerBound = new google.maps.Polyline({
            map: map,
            path: outerRetangle,
            geodesic: true,
            strokeColor: '#FF0000',
            strokeOpacity: 1.0,
            strokeWeight: 2
        });
    }
</script>

</body>
</html>